<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2018 by Tia093 (http://jsbin.com/daxayax/9/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.mis.js"></script>
<link rel="stylesheet" href="https://tia093.github.io/LA558/classes/iconref/leaflet.awesome-markers.css">
  <link rel="stylesheet" href="https://tia093.github.io/LA558/classes/iconref/fa-svg-with-js.css">
  <link rel="stylesheet" href="https://tia093.github.io/LA558/iconref/fontawesome-all.js">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
  	<script src="https://indicator.extension.iastate.edu/classes/leaflet-ajax-gh-pages/dist/leaflet.ajax.min.js"></script>
<script src="https://tia093.github.io/LA558/classes/iconref/leaflet.awesome-markers.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <script src="https://rawgit.com/k4r573n/leaflet-control-osm-geocoder/master/Control.OSMGeocoder.js"></script>
<link rel="stylesheet" href="https://rawgit.com/k4r573n/leaflet-control-osm-geocoder/master/Control.OSMGeocoder.css" />
  <link rel="stylesheet" href="https://leaflet.github.io/Leaflet.markercluster/dist/MarkerCluster.css" />

    <link rel="stylesheet" href="https://leaflet.github.io/Leaflet.markercluster/dist/MarkerCluster.Default.css" />

    <script src="https://leaflet.github.io/Leaflet.markercluster/dist/leaflet.markercluster-src.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="https://tia093.github.io/LA558/Final_Project/Data/SICL_Intersections__Top_200 (1).geojson"></script>
<script src="https://tia093.github.io/LA558/Final_Project/Data/SICL__Top_201__400_Composite_Rank.geojson"></script>
 <script src="https://tia093.github.io/LA558/Final_Project/Data/SICL__Top_401__600_Composite_Rank.geojson"></script>
 <script src="https://tia093.github.io/LA558/Final_Project/Data/SICL__Top_601__800_Composite_Rank.geojson"></script>
 <script src="https://tia093.github.io/LA558/Final_Project/Data/County_Boundaries.geojson"></script> 
  <script src="https://tia093.github.io/LA558/Final_Project/Data/SICL__Top_801__1000_Composite_Rank.geojson"></script>
<style id="jsbin-css">
div.container {
    width: 800px;
    border: 0px solid gray;
}

header{
    padding:1em;
    color: white;
    background-color: brown;
    clear: left;
    text-align: center;
    width: 800px;
}
nav {padding:1em;
     color: black;
    background-color: brown;
    clear: left;
    text-align: center;
  margin:0;
  max-width:160 px;
  width: 800px;
}
.button {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align:center;
    display: inline-block;
    font-size: 12px;
    margin: 4px 2px;
    -webkit-transition-duration: 0.4s; /* Safari */
    transition-duration: 0.4s;
    cursor: pointer;
}
.button1 {
    width:130px;
    background-color: white;
    color: black;
    border: 4px solid #e7e7e7;
}

.button1:hover {background-color: #e7e7e7;}
#mymap { height: 400px;width:800px;margin: 0; padding: 0; } 
.legend {
    line-height: 10px;
    color: #555;
}
.legend i {
    width: 18px;
    height: 20px;
    float: left;
    margin-right: 8px;
    opacity: 0.9;
}
.info {
    padding: 6px 8px;
    font: 10px/20px Arial, Helvetica, sans-serif;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;

}
.info h4 {
    margin: 0 0 5px;
    color: #777;
}
footer {
    padding: 1em;
    color: gray;
    background-color: yellow;
 clear:left;
    text-align: center;
    width: 800px;
}
   

</style>
</head>
<body>

<div class="container">

<header>
   <h1>Iowa SLCL Intersection Browsing Web</h1>
</header>

<nav>
  <a href="http://www.ctre.iastate.edu/reports/SafetyCandidate.pdf"><strong>About SICL</strong></a> |
<a href="https://www.iowadot.gov/crashanalysis/pdfs/sicl_methodologies.pdf"><strong>Methodology</strong></a> |
<a href="#mymap"><strong>Loaction Map</strong></a> |
<a href="https://tia093.github.io/LA558/"><strong>Contact me</strong></a>
</nav>
  
  
  <div class="btn-group">
<button type="button" class="button button1" id="set01" >Top 200</button>
<button type="button"      class="button button1" id="set02">201-400</button>
    <button type="button" class="button button1" id="set03">401-600</button>
    <button type="button" class="button button1" id="set04">601-800</button>
    <button type="button" class="button button1" id="set05" >801-1000</button>
    <button type="button" class="button button1" id="clear" >Clear All</button>
  </div>

  
  
<div id = "myLocation">
<div id="mymap">
  </div>
<footer>Copyright &copy; https://tia093.github.io/LA558/</footer>
<script id="jsbin-javascript">
console.clear();
var mbAttr = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'; 
var streets  = L.tileLayer(mbUrl, {id: 'mapbox.streets',   attribution: mbAttr}),
    grayscale   = L.tileLayer(mbUrl, {id: 'mapbox.light', attribution: mbAttr}),
     satellite= L.tileLayer(mbUrl,{id:'mapbox.streets-satellite',attribution:mbAttr});
  var mymap = L.map('mymap', {
		center: [42, -93],
		zoom: 6,
		layers: [streets]
	});
var osmGeocoder = new L.Control.OSMGeocoder({placeholder: 'Search location...'});
		mymap.addControl(osmGeocoder);
	var baseLayers = {
		"Streets": streets,
    "Grayscale": grayscale,
    "Satellite":satellite,
	};

var Markerset01 =L.AwesomeMarkers.icon({
			icon: 'star', 
			prefix: 'glyphicon', 
			markerColor: 'yellow',
			iconColor: 'yellow'
		});
var Markerset02 =L.AwesomeMarkers.icon({
			icon: 'star', 
			prefix: 'fa', 
			markerColor: 'blue',
			iconColor: 'blue'
		});
var Markerset03 =L.AwesomeMarkers.icon({
			icon: 'star', 
			prefix: 'fa', 
			markerColor: 'green',
			iconColor: 'green'
		});
var Markerset04 =L.AwesomeMarkers.icon({
			icon: 'star', 
			prefix: 'fa', 
			markerColor: 'purple',
			iconColor: 'brown'
		});
var Markerset05 =L.AwesomeMarkers.icon({
			icon: 'star', 
			prefix: 'fa', 
			markerColor: 'orange',
			iconColor: 'yellow'
		});
var SLCL_set01 = new L.geoJson(intersection01, {
  onEachFeature: addPopups,
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng,{
      icon:Markerset01
    });
  }
});
var SLCL_set02 = new L.geoJson(intersection02, {
  onEachFeature: addPopups,
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng,{
      icon:Markerset02
    });
  }
});

var SLCL_set03 = new L.geoJson(intersection03, {
  onEachFeature: addPopups,
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng,{
      icon:Markerset03
    });
  }
});

var SLCL_set04 = new L.geoJson(intersection04, {
  onEachFeature: addPopups,
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng,{
      icon:Markerset04
    });
  }
});

var SLCL_set05 = new L.geoJson(intersection05, {
  onEachFeature: addPopups,
  pointToLayer: function(feature, latlng) {
    return L.marker(latlng,{
      icon:Markerset05
    });
  }
});

function getColor(d) {
  return d <= '2' ? '#e6f2ff' :
         d <= '4' ? "#b3d9ff" :
         d <= '6' ? "#66b3ff" :
         d <= '8' ? "#3399ff" :
         d <= '10' ? "#0073e6" :
         "#FFFFFF"; //white
}
function style(feature) {
    return {
        fillColor: getColor(feature.properties.RUCC_2013),
        weight: 1,
        opacity: 1,
        color: 'white',
        dashArray: '2',
        fillOpacity: 0.7
    };
}
url = "https://profseeger.github.io/LA558/data/iowaCounties.json";
var geojsonLayer = new L.GeoJSON.AJAX(url , {
	style: style,
	onEachFeature: function (feature, layer) {
        htmlText = "<strong>" + feature.properties.NAME+ "</strong><br>Population 2010: <b>"  + feature.properties.POP2010 + "</b><br>Population 2000: <b>"  + feature.properties.POP2000 + "</b><br> RUCC 2013: <b>"  + feature.properties.RUCC_2013 + "</b>";
        layer.bindPopup(htmlText);
		layer.bindTooltip(feature.properties.NAME);
    }
});

var legend = L.control({
  position: 'bottomleft'
});

legend.onAdd = function(geojsonLayer) {
var div = L.DomUtil.create('div', 'info legend'),
rucc_13 = [2, 4, 6, 8,10],
labels = ['Metro', 'Non-metro','', 'Rural', ' '];
div.innerHTML += "<b>RUCC 2013</b><br>";
for (var i = 0; i < rucc_13.length; i++) {
    div.innerHTML +=
      '<i style="background:' + getColor(rucc_13[i] ) + ' "></i> ' +
      rucc_13[i] +' '+ labels[i]+'<br>';
  }
return div;
};
legend.addTo(mymap);
var overlayMaps={
   "Population": geojsonLayer,
 };
L.control.layers(baseLayers,overlayMaps).addTo(mymap);

$("#set01").click(function(){
  mymap.addLayer(SLCL_set01);
  mymap.removeLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set05);
  });
 
  
$("#set02").click(function(){
  mymap.addLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set01);
  mymap.removeLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set05);
  });
$("#set03").click(function(){
  mymap.addLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set01);
  mymap.removeLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set05);
  });
$("#set04").click(function(){
  mymap.addLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set01);
  mymap.removeLayer(SLCL_set05);
  });
$("#set05").click(function(){
  mymap.addLayer(SLCL_set05);
  mymap.removeLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set01);
  });
$("#clear").click(function(){
  mymap.removeLayer(SLCL_set05);
  mymap.removeLayer(SLCL_set02);
  mymap.removeLayer(SLCL_set03);
  mymap.removeLayer(SLCL_set04);
  mymap.removeLayer(SLCL_set01);
  });
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        $("#myLocation").html("Geolocation is not supported by this browser.");
    }
}

map.locate({setView: true, maxZoom: 16});

function showPosition(position) {
	 $("#myLocation").html("Latitude: " + position.coords.latitude + 
    "<br>Longitude: " + position.coords.longitude)};
  
function addPopups(feature, layer) {
  layer.bindPopup("Rank No. " + feature.properties.COMPRANK +
    "<BR> Location:" + feature.properties.LITERAL);
};





</script>
</body>
</html>